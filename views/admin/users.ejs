<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags-->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="Colorlib Templates" />
    <meta name="author" content="Colorlib" />
    <meta name="keywords" content="Colorlib Templates" />

    <!-- Title Page-->
    <title>All Users</title>

    <!-- Icons font CSS-->
    <link
      href="/admin/assets/node_modules2/morrisjs/morris.css"
      rel="stylesheet"
    />
    <link href="/admin/dist/css/pages/ecommerce.css" rel="stylesheet" />
    <!-- Custom CSS -->
    <link href="/admin/dist/css/style.min.css" rel="stylesheet" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="preloader">
      <div class="loader">
        <div class="loader__figure"></div>
        <p class="loader__label">Elite admin</p>
      </div>
    </div>
    <div class="main-wrapper">
      <%-include('partials/header')%> <%-include('partials/sidebar')%>
      <div class="container-fluid">
        <div class="row page-titles">
          <div class="col-md-5 align-self-center">
            <h4 class="text-themecolor">Dashboard</h4>
          </div>
          <div class="col-md-7 align-self-center text-right">
            <div class="d-flex justify-content-end align-items-center">
              <ol class="breadcrumb">
                <li class="breadcrumb-item">
                  <a href="javascript:void(0)">Home</a>
                </li>
                <li class="breadcrumb-item active">All Users</li>
              </ol>
            </div>
          </div>
        </div>
      </div>

      <div class="page-wrapper">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">All Users</h5>
                  <div class="table-responsive m-t-30">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Full Name</th>
                          <th>Image</th>
                          <th>Email</th>
                          <th>Status</th>
                          <th>Member Since</th>
                          <th>Orders</th>
                          <th>Options</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% if(users.length){ %> <% users.forEach(u => { %>
                        <tr>
                          <td><%= u.firstname + " " + u.lastname %></td>

                          <td>
                            <img
                              src="/users/images/users/<%= u.image %>"
                              style="
                                width: 2rem;
                                height: 2rem;
                                border-radius: 50%;
                                object-fit: cover;
                              "
                            />
                          </td>
                          <td><%= u.email %></td>

                          <td>
                            <% if(!u.isBlocked) {%>
                            <span style="color: green">Active</span>
                            <%} else{%>
                            <span style="color: red">Blocked</span>
                            <%}%>
                          </td>
                          <td>
                            <span><%= u.createdAt.toDateString() %></span>
                          </td>
                          <td>
                            <a
                              href="/admin/user-order/<%= u.id %>"
                              style="
                                background-color: rgb(146, 28, 230);
                                color: #fff;
                                padding: 0.2rem 0.6rem;
                                border-radius: 0.3rem;
                              "
                              >View Orders</a
                            >
                          </td>
                          <td>
                            <div>
                              <a
                                href="/admin/users/delete/<%=u.id%>"
                                style="
                                  background-color: red;
                                  color: white;
                                  padding: 0.1rem 0.5rem;
                                  border-radius: 0.2rem;
                                "
                                >Delete</a
                              >
                              <% if(u.isBlocked) { %>
                              <a
                                href="/admin/users/unblock/<%=u.id%>"
                                style="
                                  background-color: green;
                                  color: white;
                                  padding: 0.1rem 0.5rem;
                                  border-radius: 0.2rem;
                                "
                                >Unblock</a
                              >
                              <%} else{%>
                              <a
                                href="/admin/users/block/<%=u.id%>"
                                style="
                                  background-color: #ff6700;
                                  color: white;
                                  padding: 0.1rem 0.5rem;
                                  border-radius: 0.2rem;
                                "
                                >Block</a
                              >
                              <%}%>
                            </div>
                          </td>
                        </tr>
                        <% }) %> <% } else { %>
                        <h2>There is no user information to show</h2>
                        <%}%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/admin/assets/node_modules2/jquery/jquery-3.2.1.min.js"></script>
    <!-- Bootstrap tether Core JavaScript -->
    <script src="/admin/assets/node_modules2/popper/popper.min.js"></script>
    <script src="/admin/assets/node_modules2/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- slimscrollbar scrollbar JavaScript -->
    <script src="/admin/dist/js/perfect-scrollbar.jquery.min.js"></script>
    <!--Wave Effects -->
    <script src="/admin/dist/js/waves.js"></script>
    <!--Menu sidebar -->
    <script src="/admin/dist/js/sidebarmenu.js"></script>
    <!--stickey kit -->
    <script src="/admin/assets/node_modules2/sticky-kit-master/dist/sticky-kit.min.js"></script>
    <script src="/admin/assets/node_modules2/sparkline/jquery.sparkline.min.js"></script>
    <!--Custom JavaScript -->
    <script src="/admin/dist/js/custom.min.js"></script>
    <script src="/admin/assets/node_modules2/jquery-sparkline/jquery.sparkline.min.js"></script>
    <!-- ============================================================== -->
    <!-- This page plugins -->
    <!-- ============================================================== -->
    <!--morris JavaScript -->
    <script src="/admin/assets/node_modules2/raphael/raphael-min.js"></script>
    <script src="/admin/assets/node_modules2/morrisjs/morris.min.js"></script>
    <!--Custom JavaScript -->
    <script src="/admin/dist/js/ecom-dashboard.js"></script>
  </body>
</html>
