<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Men</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="/users/images/icons/favicon.png" />
   <%- include('layout/layout') %>
  </head>
  <body class="animsition">
    <!-- Header -->

    <%- include('partials/header.ejs') %>
    
    <!-- Content page -->
    <section class="bgwhite p-t-55 p-b-65">
      <div class="container">
        <div class="row">
          <div class="col-sm-6 col-md-4 col-lg-3 p-b-50">
            <div class="leftbar p-r-20 p-r-0-sm">
              <!-- -->
              <h4 class="m-text14 p-b-7">Categories</h4>

              <ul class="p-b-54">
                <li class="p-t-4">
                    <input
                    type="radio"
                    id="all"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                     class="category"
                  />
                  <label for="all">All</label>
                </li>
                <li class="p-t-4">
                  <input
                    type="radio"
                    id="lifestyle"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                     class="category"
                  />
                  <label for="lifestyle">Lifestyle</label>
                  </span>
                </li>
                <li class="p-t-4">
                    <input
                    type="radio"
                    id="jordan"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                      class="category"
                  />
                  <label for="jordan">Jordan</label>
                </li>
                <li class="p-t-4">
                    <input
                    type="radio"
                    id="basketball"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                      class="category"
                  />
                  <label for="basketball">Basketball</label>
                </li>
                <li class="p-t-4">
                    <input
                    type="radio"
                    id="football"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                      class="category"
                  />
                  <label for="football">Football</label>
                </li>
                <li class="p-t-4">
                    <input
                    type="radio"
                    id="skateboarding"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                      class="category"
                  />
                  <label for="skateboarding">Skateboarding</label>
                </li>

                <li class="p-t-4">
                     <input
                    type="radio"
                    id="running"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                      class="category"
                  />
                  <label for="running">Running</label>
                </li>

                <li class="p-t-4">
                     <input
                    type="radio"
                    id="gym and training"
                    name="category"
                    style="cursor: pointer"
                      onclick=" priceSortAdvanced()"
                      class="category"
                  />
                  <label for="gym and training">Gym and Traning</label>
                </li>
              </ul>


              <div class="filter-price p-t-22 p-b-50">
              </div>

             
              <h4 class="m-text14 p-b-32">Search Products</h4>
              <div class="search-product pos-relative bo4 of-hidden">
                <input
                  class="s-text7 size6 p-l-23 p-r-50"
                  type="text"
                  name="search-product"
                  placeholder="Search Products..."
                  onKeypress="priceSortAdvanced()"
                  id="search"
                />

                <button
                  class="flex-c-m size5 ab-r-m color2 color0-hov trans-0-4"
                >
                  <i class="fs-12 fa fa-search" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="col-sm-6 col-md-8 col-lg-9 p-b-50">
            <!--  -->
            <div class="flex-sb-m flex-w p-b-35">
              <div class="flex-w">
                <div
                  class="rs2-select2 bo4 of-hidden w-size12 m-t-5 m-b-5 m-r-10"
                >
                  <select
                    class="selection-2"
                    name="sorting"
                    style="width: 100%; padding: 0.5rem; outline: none"
                    onChange="priceSortAdvanced()"
                    id="basic"
                  >
                    <option value="null">Default Sorting</option>
                    <option value="ascending">Price: low to high</option>
                    <option value="descending">Price: high to low</option>
                  </select>
                </div>

                <div
                  class="rs2-select2 bo4 of-hidden w-size12 m-t-5 m-b-5 m-r-10"
                >
                  <select
                    class="selection-2"
                    name="sorting"
                    style="width: 100%; padding: 0.5rem; outline: none"
                    onChange="priceSortAdvanced()"
                    id="advanced"
                  >
                    <option value="null">Price</option>
                    <option value="0-5000">Rs.0 - Rs.5000</option>
                    <option value="5000-9999">Rs.5000 - Rs.10000</option>
                    <option value="10000-14999">Rs.10000 - Rs.15000</option>
                    <option value="15000-19999">Rs.15000 - Rs.20000</option>
                    <option value="20000-100000">Rs.20000+</option>
                  </select>
                </div>
              </div>

              <span class="s-text8 p-t-5 p-b-5">
                Showing 1â€“12 of 16 results
              </span>
            </div>

            <!-- Product -->
            <div class="row" id="product_container">
             <% if(products.length){%>
               <% products.forEach((p,i) => {%>
                <% if(p.variants[0]){%>
                  <div class="col-sm-12 col-md-6 col-lg-4 p-b-50" id="container">
                <!-- Block2 -->
                <div class="block2">
                  <div
                    class="
                      block2-img
                      wrap-pic-w
                      of-hidden
                      pos-relative
                      block2-labelnew
                    "
                  >
                    <img
                      src="/admin/products/<%=p.image[0].img%>"
                      alt="<%p.name%>"
                      class="prodImg"
                       style="height: 33vh; object-fit: cover;"
                    />

                    <div class="block2-overlay trans-0-4">
                    </div>
                  </div>

                  <div class="block2-txt p-t-20">
                    <a
                      href="/product/<%= p.variants[0].slug%>"
                      class="block2-name dis-block s-text3 p-b-5 productName"
                    >
                      <%= p.name%>
                    </a>

                    <span class="block2-price m-text6 p-r-5 productPrice">
                      &#8377; <%= p.price.toLocaleString()%>
                    </span>
                  </div>
                </div>
              </div>
                <%}%>
              <%})%>
             <%}%>
            </div>

            <!-- Pagination -->
            <div class="pagination flex-m flex-w p-t-26" id="pagination">
            
             <% for(let i = 1; i <= pageCount; i++){%>
            
                 <a
                href="/products/men?page_num=<%=i-1%>" 
                class="item-pagination flex-c-m trans-0-4"
                onclick="pagination('<%= i-1 %>')"
                ><%=i%></a>
               
             
             <%}%>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Footer -->
    <%- include('partials/footer.ejs') %>

    <!-- Back to top -->
    <div class="btn-back-to-top bg0-hov" id="myBtn">
      <span class="symbol-btn-back-to-top">
        <i class="fa fa-angle-double-up" aria-hidden="true"></i>
      </span>
    </div>

    <!-- Container Selection1 -->
    <div id="dropDownSelect1"></div>

    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/jquery/jquery-3.2.1.min.js"
    ></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/animsition/js/animsition.min.js"
    ></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/bootstrap/js/popper.js"
    ></script>
    <script
      type="text/javascript"
      src="/users/vendor/bootstrap/js/bootstrap.min.js"
    ></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/select2/select2.min.js"
    ></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/slick/slick.min.js"
    ></script>
    <script type="text/javascript" src="/users/js/slick-custom.js"></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/countdowntime/countdowntime.js"
    ></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/lightbox2/js/lightbox.min.js"
    ></script>
    <!--===============================================================================================-->
    <script
      type="text/javascript"
      src="/users/vendor/sweetalert/sweetalert.min.js"
    ></script>
    <script>
      function priceSortAdvanced() {
        let pagination = document.getElementById("pagination");
        pagination.innerHTML = "";
        let priceSortOne = document.getElementById("basic");
        let optionOne = priceSortOne.options[priceSortOne.selectedIndex].value;
        let priceSortTwo = document.getElementById("advanced");
        let optionTwo = priceSortTwo.options[priceSortTwo.selectedIndex].value;
        let allCategory = document.querySelectorAll(".category");
        let category = null;
        for(i = 0; i < allCategory.length; i++){
          if(allCategory[i].checked){
            category = allCategory[i].id;
          }
        }
        if(!category){
          category = "all"
        }
        console.log(category, "cat");
        let productContainer = document.getElementById("product_container");
        productContainer.innerHTML = "";
        let search = document.getElementById("search").value;
        console.log(search);
        $.ajax({
          url: `/products/men/priceSortAdvanced`,
          data: {
            basic: optionOne,
            advanced: optionTwo,
            category,
            search,
          },
          method: "get",
          success: (response) => {
            let { products } = response;
            products.forEach((p, i) => {
              let parentDiv = document.createElement("div");
              parentDiv.setAttribute(
                "class",
                "col-sm-12 col-md-6 col-lg-4 p-b-50"
              );
              let subDivOne = document.createElement("div");
              subDivOne.classList.add("block2");
              let subDivTwo = document.createElement("div");
              subDivTwo.setAttribute(
                "class",
                " block2-img wrap-pic-w of-hidden pos-relative block2-labelnew"
              );
              let prodImg = document.createElement("img");
              prodImg.src = `/admin/products/${p.image[0].img}`;
              prodImg.alt = `${p.name}`;
              subDivTwo.append(prodImg);
              let overlay = document.createElement("div");
              overlay.setAttribute("class", "block2-overlay", "trans-0-4");
              let link1 = document.createElement("a");
              link1.href = "#";
              link1.setAttribute(
                "class",
                "block2-btn-addwishlist hov-pointer trans-0-4"
              );
              let icon1 = document.createElement("i");
              icon1.ariaHidden = "true";
              icon1.setAttribute("class", "icon-wishlist icon_heart_alt");
              let icon2 = document.createElement("i");
              icon2.setAttribute("class", "icon-wishlist icon_heart dis-none");
              icon2.ariaHidden = "true";
              link1.append(icon1, icon2);
              overlay.append(link1);
              subDivTwo.append(overlay);
              let subDiveThree = document.createElement("div");
              subDiveThree.setAttribute("class", "block2-txt p-t-20");
              let link2 = document.createElement("a");
              link2.href = `/product/${p.variants[0].slug}`;
              link2.setAttribute(
                "class",
                "block2-name dis-block s-text3 p-b-5 productName"
              );
              link2.innerText = p.name;
              let span = document.createElement("span");
              span.setAttribute(
                "class",
                "block2-price m-text6 p-r-5 productPrice"
              );
              span.innerText = p.price;
              subDiveThree.append(link2, span);
              subDivOne.append(subDivTwo, subDiveThree);
              parentDiv.append(subDivOne);
              productContainer.appendChild(parentDiv);
            });
          },
        });
      }
      let index = <%= page_num  %>;
        let pageArr = document.getElementsByClassName("item-pagination");
        pageArr[index].classList.add("active-pagination")
    </script>
    <!--===============================================================================================-->
    <script src="/users/js/main.js"></script>
  </body>
</html>
